@page "/tasks/{Department}"
@using HotelProject.Service
@using HotelProject.Data
@inject TaskService TaskService

<h3>@Department Tasks</h3>

@if (tasks == null)
{
    <p>Loading...</p>
}
else if (tasks.Count == 0)
{
    <p>No tasks available.</p>
}
else
{
    <ul>
        @foreach (var hotelTask in tasks)
        {
            <li>@hotelTask.Description - <strong>@hotelTask.Status</strong> - <button @onclick="() => ChangeStatus(hotelTask)">Change Status</button></li>
        }
    </ul>
}

@code {
    [Parameter]
    public string Department { get; set; }

    private List<HotelTask> tasks; // Update the type here

    protected override async Task OnInitializedAsync()
    {
        tasks = await TaskService.GetTasksByDepartment(Department);
    }

    private void ChangeStatus(HotelTask hotelTask) // Update the parameter type
    {
        hotelTask.Status = "In Progress"; // Assume this property is settable
        TaskService.UpdateTask(hotelTask);
    }
}
